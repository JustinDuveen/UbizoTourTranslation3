# Ubizo Tour Translator

Real-time multilingual tour translation application using WebRTC and OpenAI's Realtime API.

## Overview

The Ubizo Tour Translator enables real-time multilingual communication between tour guides and attendees using OpenAI's Realtime WebRTC API for ultra-low-latency voice-to-voice translation. The system ensures seamless translation of spoken content into multiple languages simultaneously while maintaining high audio quality and minimal delay.

## Features

- **Real-time Translation**: Instant voice-to-voice translation in multiple languages
- **WebRTC Communication**: Direct peer-to-peer audio streaming
- **Multi-language Support**: Simultaneous translation to multiple languages
- **Low Latency**: Minimal delay for natural conversation flow
- **Robust Connection Handling**: Automatic reconnection and fallback mechanisms
- **User-friendly Interface**: Simple UI for both guides and attendees

## Architecture

The application is built with:

- **Frontend**: Next.js, React, WebRTC
- **Backend**: Next.js API Routes, Node.js
- **Database**: Supabase
- **Cache**: Redis
- **Translation**: OpenAI Realtime WebRTC API
- **Deployment**: Docker, Kubernetes

## Language Handling

The application uses a centralized approach to language handling to ensure consistency across all components:

### Key Concepts

- **Storage Format**: Languages are normalized to lowercase for Redis keys and internal operations
- **Display Format**: Languages are capitalized for UI display and user-facing content
- **Standardized Redis Keys**: All Redis keys follow standardized patterns generated by utility functions

### Language Utilities

The language utilities are defined in `lib/languageUtils.ts` and provide functions for:

- Language normalization and formatting
- Redis key generation
- SDP validation
- Transaction handling

For detailed information about language handling, see the [Language Handling Documentation](docs/language-handling.md).

## Getting Started

### Prerequisites

- Node.js 18+
- Redis
- Supabase account
- OpenAI API key

### Installation

1. Clone the repository:
   ```
   git clone https://github.com/your-username/ubizo-tour-translator.git
   cd ubizo-tour-translator
   ```

2. Install dependencies:
   ```
   npm install
   ```

3. Set up environment variables:
   ```
   cp .env.example .env.local
   ```
   Edit `.env.local` with your API keys and configuration.

4. Run the development server:
   ```
   npm run dev
   ```

5. Open [http://localhost:3000](http://localhost:3000) in your browser.

## Documentation

- [Language Handling](docs/language-handling.md): Detailed documentation on language normalization and Redis key generation
- [Phase 3 Implementation](docs/phase3-implementation.md): Technical details of the centralized language handling implementation
- [Language Utilities Reference](docs/language-utilities-reference.md): Quick reference for language utility functions

## License

This project is licensed under the MIT License - see the LICENSE file for details.

## Acknowledgments

- OpenAI for the Realtime API
- WebRTC for enabling real-time communication
- Next.js team for the excellent framework
